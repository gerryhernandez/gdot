#!/usr/bin/env python3
import os

included_home_subdirs=set(""".config
.gnupg
.ssh
Desktop
Documents
inbox
Library
Movies
Pictures
Public""".split("\n"))

# Q: "What is the inbox folder?"
# A: I purge my downloads folder from time to time. The inbox folder is
#    to move things from ~/Downloads into a place that isn't purged and
#    is still included in my Time Machine backups.

home_dir = os.path.expanduser("~")
home_subdirs = {dir for dir in os.listdir(home_dir) if os.path.isdir(os.path.join(home_dir, dir))}

dirs_to_ignore = {dir for dir in home_subdirs if dir not in included_home_subdirs}

for dir in dirs_to_ignore:
    os.system(f"tmutil addexclusion -p {os.path.join(home_dir, dir)}")
